<?xml version="1.0"?>
<!DOCTYPE modification SYSTEM "http://www.simplemachines.org/xml/modification">

<modification xmlns="http://www.simplemachines.org/xml/modification" xmlns:smf="http://www.simplemachines.org/">
	<id>premiumbeat:mp3forsmf</id>
	<version>2.0</version>
	<file name="$boarddir/index.php">
	<operation><search position="before"><![CDATA['coppa' => array('Register.php', 'CoppaForm'),]]></search><add><![CDATA[
		'customMusic' => array('CustomMusicPlaylist.php', 'CustomMusicMp3'),
		'customMusicPopup' => array('CustomMusicPlaylist.php', 'PremiumbeatPopup'),
		'custom_mp3' => array('CustomMusic.php', 'custom_mp3'),
		'premiumbeat_settings' => array('CustomMusicSettings.php', 'custom_mp3_forum_settings'),]]></add>
		</operation>
	</file>
	<file name="$sourcedir/Subs.php">
	<operation><search position="replace"><![CDATA[	// Admin area 'Maintenance Controls'.]]></search><add><![CDATA[	/* Admin area 'Premiumbeat' */
	if (allowedTo(array('premiumbeat_config', 'premiumbeat_settings')))
	{
		$context['admin_areas']['premiumbeat'] = array(
			'title' => $txt['customMusic_tabtitle'],
			'areas' => array(
				'custom_mp3' => '<a href="' . $scripturl . '?action=custom_mp3">' . $txt['customMusic_tabtitle6'] . '</a>',	
				'premiumbeat_settings' => '<a href="' . $scripturl . '?action=premiumbeat_settings">' . $txt['customMusic_tabtitle7'] . '</a>',								
			)
		);

	}	
	// Admin area 'Maintenance Controls'.]]></add>
		</operation>
	</file>
	<file name="$sourcedir/ManagePermissions.php">
	<operation><search position="before"><![CDATA[			'general' => array(
				'view_stats' => false,
				'view_mlist' => false,
				'who_view' => false,
				'search_posts' => false,
				'karma_edit' => false,
			),]]></search><add><![CDATA[
			'premiumbeat_perms' => array(
				'premiumbeat_config' => false,
				'premiumbeat_settings' => false,
				'premiumbeat_showlink' => false,
				'premiumbeat_showbbc' => false,	
				'premiumbeat_showplaylists' => false,	
				'premiumbeat_showupload' => false,	
				'premiumbeat_showdownload' => false,									
			),]]></add>
		</operation>
		<operation><search position="before"><![CDATA[	// This is just a helpful array of permissions guests... cannot have.
	$non_guest_permissions = array(
		'karma_edit',
		'pm_read',
		'pm_send',]]></search><add><![CDATA[
		'premiumbeat_config',
		'premiumbeat_settings',
		'premiumbeat_showupload',
		'premiumbeat_showdownload',
		'premiumbeat_showdelete',]]></add>
		</operation>	
	</file>	
	<file name="$languagedir/Modifications.english.php">		
		<operation>
			<search position="after"><![CDATA[?>]]></search>
			<add><![CDATA[
/* Premiumbeat Modification language variables - for SMF */
$txt['customMusic_tabtitle'] = 'Premiumbeat';
$txt['customMusic_tabtitle2'] = 'Premiumbeat MP3 List';
$txt['customMusic_tabtitle3'] = 'Premiumbeat Playlist Settings Menu';
$txt['customMusic_tabtitle4'] = 'Premiumbeat Edit Playlist';
$txt['customMusic_tabtitle5'] = 'Premiumbeat Add/Edit';
$txt['customMusic_tabtitle6'] = 'Mp3 Database';
$txt['customMusic_tabtitle7'] = 'Settings';
$txt['customMusic_tabtitle8'] = 'Upload MP3 Files';
$txt['premiumbeat_forum'] = 'Premiumbeat Settings';
$txt['premiumbeat_override'] = 'Override Playlist';
$txt['premiumbeat_file'] = 'Default Uploading Folder';
$txt['premiumbeat_auto'] = 'Auto Playlist ID&#35;';
$txt['premiumbeat_link'] = 'Playlist Permissions';
$txt['premiumbeat_mainlink'] = 'Playlist Link';
$txt['premiumbeat_mainlink_dropdown'] = 'Playlist Link Drop-down';
$txt['customMusic_tag'] = 'Track number of mp3';
$txt['customMusic_description'] = 'Title of mp3';
$txt['customMusic_enable'] = 'Enable mp3';
$txt['customMusic_text'] = 'Details';
$txt['customMusic_url'] = 'mp3 URL';
$txt['CustomMusic_count'] = 'MP3 ID Number';
$txt['customMusic_type'] = 'Enable Shuffling of mp3 Playlist';
$txt['customMusic_width'] = 'Set overall mp3 Player Width';
$txt['customMusic_height'] = 'Set overall mp3 Player Height';
$txt['customMusic_autoplay'] = 'Enable Autoplay of mp3 Playlist';
$txt['customMusic_skin'] = 'Set skin color code &#35;';
$txt['customMusic_skin_type'] = 'Set skin type';
$txt['customMusic_skin_type_num'] = 'Skin&#35;';
$txt['customMusic_playlist'] = 'Playlist';
$txt['customMusic_playlist_num'] = 'Playlist&#35;';
$txt['customMusic_playlist_data'] = 'Playlist Settings';
$txt['customMusic_view_playlist'] = 'View Playlist&#35;';
$txt['customMusic_playlist_alt'] = '&#35;';
$txt['customMusic_trackid'] = 'Track&#35;';
$txt['customMusic_mp3id'] = 'Mp3 ID&#35;';
$txt['premiumbeat_enabled'] = 'Enabled';
$txt['premiumbeat_disabled'] = 'Disabled';
$txt['customMusic_enable'] = 'Enable/Disable';
$txt['customMusic_delete'] = 'Delete';
$txt['customMusic_trackname'] = 'Track Name';
$txt['customMusic_submit'] = 'Submit';
$txt['customMusicUpload_submit'] = 'Submit Files';
$txt['customMusic_help'] = 'Help';
$txt['premiumbeat_settings'] = 'Playlist Settings';
$txt['premiumbeat_edit'] = 'Edit Mp3';
$txt['premiumbeat_browse'] = 'Mp3 Music List';
$txt['customMusic_status'] = 'Status';
$txt['premiumbeat_type'] = 'Order';
$txt['premiumbeat_asc'] = 'Ascend';
$txt['premiumbeat_shuffle'] = 'Shuffle';
$txt['premiumbeat_return'] = 'MP3 List';
$txt['premiumbeat_height'] = 'Height';
$txt['premiumbeat_width'] = 'Width';
$txt['premiumbeat_autoplay'] = 'Autoplay';
$txt['premiumbeat_edit_list'] = 'Edit Settings For Playlist&#35;';
$txt['premiumbeat_playlist'] = 'Specific Playlist';
$txt['premiumbeat_toggle_autoplay'] = 'Autoplay';
$txt['premiumbeat_toggle_type'] = 'Order';
$txt['premiumbeat_edit_add'] = 'Add New Mp3';
$txt['premiumbeat_upload'] = 'Mp3 Files';
$txt['premiumbeat_upload_files'] = 'Utilize MP3 Files';
$txt['premiumbeat_upload_file'] = 'Upload Files&#58;';
$txt['premiumbeat_upload_fail'] = '!Failed to upload file&#58; ';
$txt['premiumbeat_upload_success'] = 'Successful upload&#58; ';
$txt['premiumbeat_playlist_query'] = 'Query Specific Playlist';
$txt['premiumbeat_playlist_create'] = 'Create Playlist';
$txt['premiumbeat_playlist_newname'] = 'Enter Playlist Name';
$txt['premiumbeat_playlist_edit'] = 'Select Playlist&#58;';
$txt['premiumbeat_playlist_perm1'] = 'Assigned to membergroup&#58; '; 
$txt['premiumbeat_playlist_perm2'] = 'Assign this playlist to membergroups shown below:';
$txt['premiumbeat_help_perm'] = 'Playlist permissions allow specific membergroups access from the forum link.<br />Unassigned membergroups will use the override playlist available from the link.<br />Each membergroup can only be assigned to one playlist.<br />If a user belongs to more than one membergroup, the highest star rated group will apply.<br />For portal php blocks/modules use your portal permissions.<br />';
$txt['premiumbeat_na'] = 'Unassigned';
$txt['premiumbeat_open_perm'] = 'Permission Settings';
$txt['premiumbeat_player'] = 'Mp3 Player';
$txt['premiumbeat_checkall'] = 'Select All';
$txt['premiumbeat_delete_all'] = 'Delete All';
$txt['premiumbeat_bbc_mp3'] = 'Play MP3';
$txt['premiumbeat_playlist_file'] = 'Auto-play folder&#58;';
$txt['premiumbeat_file_title'] = 'Auto-play folder';
$txt['premiumbeat_playlist_title'] = 'Playlist title';
$txt['premiumbeat_playlist_titlez'] = 'Playlist title&#58;';
$txt['premiumbeat_playlist_equip'] = 'File Access'; 
$txt['customMusic_general'] = 'General Settings';
$txt['customMusicSortPlay'] = 'Settings for Playlist&#35;';
$txt['customMusic_sort'] = 'View Playlist&#35;';
$txt['customMusic_maindir'] = 'Default Directory';
$txt['customMusic_overdir'] = 'Override Directory';
$txt['musicfile_author'] = 'File Author';
$txt['music_filename'] = 'Filename';
$txt['music_nofolder'] = 'N/A';
$txt['premiumbeat_playlist_filez'] = 'Auto-play folder';
$txt['premiumbeat_playlist_test'] = 'Test Playlist';
$txt['music_filedate'] = 'Date';
$txt['music_fileplay'] = 'Play'; 
$txt['customMusicUpload_compat'] = 'Command';
$txt['customMusicUpload_rename'] = 'Compat Files';
$txt['customMusicUpload_noname'] = 'Anonymous';
$txt['customMusicUpload_reset'] = 'Reset';
$txt['customMusic_visability'] = 'Visibility';
$txt['customMusic_execute'] = 'Execute';
$txt['customMusic_download'] = 'Download';
$txt['customMusicDownloadAlert'] = 'Only 3 files can be downloaded at once';
$txt['premiumbeat_license'] = 'License';
$txt['premiumbeat_confirm'] = 'Do you confirm this action?';

/* upload text */
$txt['customMusic_ulall'] = 'Upload all';
$txt['customMusic_ul'] = 'Uploading...';
$txt['customMusic_clear'] = 'Clear';
$txt['customMusic_file'] = 'File';
$txt['customMusic_size'] = 'Size';
$txt['customMusic_progress'] = 'Progress';
$txt['customMusic_remove'] = 'Remove';
$txt['customMusic_upload'] = 'Upload';
$txt['customMusic_finish'] = 'Finish';
]]></add>
		</operation>
	</file>
<file name="$languagedir/ManagePermissions.english.php">		
		<!-- Add the English permissions text. -->
		<operation><search position="after"><![CDATA[$txt['permissiongroup_calendar'] = 'Calendar';]]></search><add><![CDATA[
/* Premiumbeat permission language variables */ 
$txt['permissiongroup_simple_premiumbeat_perms'] = 'Premiumbeat';
$txt['permissiongroup_premiumbeat_perms'] = 'Premiumbeat';
$txt['permissionname_premiumbeat_config'] = 'Access Premiumbeat Configuration';
$txt['permissionname_premiumbeat_settings'] = 'Access Premiumbeat Forum Settings';
$txt['permissionname_premiumbeat_showlink'] = 'Enable/View Premiumbeat Forum Link';
$txt['permissionname_premiumbeat_showbbc'] = 'Enable/View Premiumbeat BB Code Link';
$txt['permissionname_premiumbeat_showplaylists'] = 'Enable/View All Playlists For the Premiumbeat BB Code';
$txt['permissionname_premiumbeat_showupload'] = 'Enable/View Premiumbeat Upload Function';
$txt['permissionname_premiumbeat_showdownload'] = 'Enable/View Premiumbeat Download Function';
$txt['permissionname_premiumbeat_showdelete'] = 'Allow mp3 and file deletion';
$txt['permissionhelp_premiumbeat_config'] = 'This will allow the opted usergroup to moderate Premiumbeat Configuration';
$txt['permissionhelp_premiumbeat_settings'] = 'This will allow the opted usergroup to moderate Premiumbeat Forum Settings and Playlist Settings';
$txt['permissionhelp_premiumbeat_showlink'] = 'This will allow the opted usergroup to view the premiumbeat play link';
$txt['permissionhelp_premiumbeat_showbbc'] = 'This will allow the opted usergroup to view the BB Code play link';
$txt['permissionhelp_premiumbeat_showplaylists'] = 'This will allow the opted usergroup to view all playlists using BB Code';
$txt['permissionhelp_premiumbeat_showupload'] = 'This will allow the opted usergroup to use the upload mp3 function';
$txt['permissionhelp_premiumbeat_showdownload'] = 'This will allow the opted usergroup to use the download mp3 function';
$txt['permissionhelp_premiumbeat_showdelete'] = 'This will allow the opted usergroup to use any delete option';

]]></add></operation></file>			
<file name="$languagedir/Errors.english.php">		
		<operation><search position="after"><![CDATA[?>]]></search><add><![CDATA[
/* Premiumbeat - Custom mp3 Player for SMF error messages */
$txt['customMusic_check'] = 'You are not permitted to view the mp3 playlist.';
$txt['customMusic_error'] = 'Premiumbeat database error.';
$txt['customMusic_error2'] = 'Playlist not found/specified.';
$txt['customMusic_error_zip'] = 'Compression Malfunction';
$txt['cannot_premiumbeat_settings'] = 'You do not have permission to use this option.';
$txt['cannot_premiumbeat_config'] = 'You do not have permission to use this option.';
$txt['cannot_premiumbeat_showdelete'] = 'You do not have permission to use this option.';
$txt['cannot_premiumbeat_showupload'] = 'You do not have permission to use this option.';
$txt['cannot_premiumbeat_showdownload'] = 'You do not have permission to use this option.';
$txt['cannot_premiumbeat_showbbc'] = 'You do not have permission to use this option.';
$txt['cannot_premiumbeat_showlink'] = 'You do not have permission to use this option.';
]]></add></operation></file>
	<file error="skip" name="$languagedir/Modifications.english-utf8.php">		
		<operation>
			<search position="after"><![CDATA[?>]]></search>
			<add><![CDATA[
/* Premiumbeat Modification language variables - for SMF */
$txt['customMusic_tabtitle'] = 'Premiumbeat';
$txt['customMusic_tabtitle2'] = 'Premiumbeat MP3 List';
$txt['customMusic_tabtitle3'] = 'Premiumbeat Playlist Settings Menu';
$txt['customMusic_tabtitle4'] = 'Premiumbeat Edit Playlist';
$txt['customMusic_tabtitle5'] = 'Premiumbeat Add/Edit';
$txt['customMusic_tabtitle6'] = 'Mp3 Database';
$txt['customMusic_tabtitle7'] = 'Settings';
$txt['customMusic_tabtitle8'] = 'Upload MP3 Files';
$txt['premiumbeat_forum'] = 'Premiumbeat Settings';
$txt['premiumbeat_override'] = 'Override Playlist';
$txt['premiumbeat_file'] = 'Default Uploading Folder';
$txt['premiumbeat_auto'] = 'Auto Playlist ID&#35;';
$txt['premiumbeat_link'] = 'Playlist Permissions';
$txt['premiumbeat_mainlink'] = 'Playlist Link';
$txt['premiumbeat_mainlink_dropdown'] = 'Playlist Link Drop-down';
$txt['customMusic_tag'] = 'Track number of mp3';
$txt['customMusic_description'] = 'Title of mp3';
$txt['customMusic_enable'] = 'Enable mp3';
$txt['customMusic_text'] = 'Details';
$txt['customMusic_url'] = 'mp3 URL';
$txt['CustomMusic_count'] = 'MP3 ID Number';
$txt['customMusic_type'] = 'Enable Shuffling of mp3 Playlist';
$txt['customMusic_width'] = 'Set overall mp3 Player Width';
$txt['customMusic_height'] = 'Set overall mp3 Player Height';
$txt['customMusic_autoplay'] = 'Enable Autoplay of mp3 Playlist';
$txt['customMusic_skin'] = 'Set skin color code &#35;';
$txt['customMusic_skin_type'] = 'Set skin type';
$txt['customMusic_skin_type_num'] = 'Skin&#35;';
$txt['customMusic_playlist'] = 'Playlist';
$txt['customMusic_playlist_num'] = 'Playlist&#35;';
$txt['customMusic_playlist_data'] = 'Playlist Settings';
$txt['customMusic_view_playlist'] = 'View Playlist&#35;';
$txt['customMusic_playlist_alt'] = '&#35;';
$txt['customMusic_trackid'] = 'Track&#35;';
$txt['customMusic_mp3id'] = 'Mp3 ID&#35;';
$txt['premiumbeat_enabled'] = 'Enabled';
$txt['premiumbeat_disabled'] = 'Disabled';
$txt['customMusic_enable'] = 'Enable/Disable';
$txt['customMusic_delete'] = 'Delete';
$txt['customMusic_trackname'] = 'Track Name';
$txt['customMusic_submit'] = 'Submit';
$txt['customMusicUpload_submit'] = 'Submit Files';
$txt['customMusic_help'] = 'Help';
$txt['premiumbeat_settings'] = 'Settings';
$txt['premiumbeat_edit'] = 'Edit Mp3';
$txt['premiumbeat_browse'] = 'Mp3 Music List';
$txt['customMusic_status'] = 'Status';
$txt['premiumbeat_type'] = 'Playlist Order';
$txt['premiumbeat_asc'] = 'Ascend';
$txt['premiumbeat_shuffle'] = 'Shuffle';
$txt['premiumbeat_return'] = 'MP3 List';
$txt['premiumbeat_height'] = 'Height';
$txt['premiumbeat_width'] = 'Width';
$txt['premiumbeat_autoplay'] = 'Autoplay';
$txt['premiumbeat_edit_list'] = 'Edit Settings For Playlist&#35;';
$txt['premiumbeat_playlist'] = 'Specific Playlist';
$txt['premiumbeat_toggle_autoplay'] = 'Autoplay';
$txt['premiumbeat_toggle_type'] = 'Order';
$txt['premiumbeat_edit_add'] = 'Add New Mp3';
$txt['premiumbeat_upload'] = 'Mp3 Files';
$txt['premiumbeat_upload_files'] = 'Utilize MP3 Files';
$txt['premiumbeat_upload_file'] = 'Upload Files&#58;';
$txt['premiumbeat_upload_fail'] = '!Failed to upload file&#58; ';
$txt['premiumbeat_upload_success'] = 'Successful upload&#58; ';
$txt['premiumbeat_playlist_query'] = 'Query Specific Playlist';
$txt['premiumbeat_playlist_create'] = 'Create Playlist';
$txt['premiumbeat_playlist_newname'] = 'Enter Playlist Name';
$txt['premiumbeat_playlist_edit'] = 'Select Playlist&#58;';
$txt['premiumbeat_playlist_perm1'] = 'Assigned to membergroup&#58; '; 
$txt['premiumbeat_playlist_perm2'] = 'Assign this playlist to membergroups shown below:';
$txt['premiumbeat_help_perm'] = 'Playlist permissions allow specific membergroups access from the forum link.<br />Unassigned membergroups will use the override playlist available from the link.<br />Each membergroup can only be assigned to one playlist.<br />If a user belongs to more than one membergroup, the highest star rated group will apply.<br />For portal php blocks/modules use your portal permissions.<br />';
$txt['premiumbeat_na'] = 'Unassigned';
$txt['premiumbeat_open_perm'] = 'Permission Settings';
$txt['premiumbeat_player'] = 'Mp3 Player';
$txt['premiumbeat_checkall'] = 'Select All';
$txt['premiumbeat_delete_all'] = 'Delete All';
$txt['premiumbeat_bbc_mp3'] = 'Play MP3';
$txt['premiumbeat_playlist_file'] = 'Auto-play folder&#58;';
$txt['premiumbeat_file_title'] = 'Auto-play folder';
$txt['premiumbeat_playlist_title'] = 'Playlist title';
$txt['premiumbeat_playlist_titlez'] = 'Playlist title&#58;';
$txt['premiumbeat_playlist_equip'] = 'File Access'; 
$txt['customMusic_general'] = 'General Settings';
$txt['customMusicSortPlay'] = 'Settings for Playlist&#35;';
$txt['customMusic_sort'] = 'View Playlist&#35;';
$txt['customMusic_maindir'] = 'Default Directory';
$txt['customMusic_overdir'] = 'Override Directory';
$txt['musicfile_author'] = 'File Author';
$txt['music_filename'] = 'Filename';
$txt['music_nofolder'] = 'N/A';
$txt['premiumbeat_playlist_filez'] = 'Auto-play folder';
$txt['premiumbeat_playlist_test'] = 'Test Playlist';
$txt['music_filedate'] = 'Date';
$txt['music_fileplay'] = 'Play'; 
$txt['customMusicUpload_compat'] = 'Command';
$txt['customMusicUpload_rename'] = 'Compat Files';
$txt['customMusicUpload_noname'] = 'Anonymous';
$txt['customMusicUpload_reset'] = 'Reset';
$txt['customMusic_visability'] = 'Visibility';
$txt['customMusic_execute'] = 'Execute';
$txt['customMusic_download'] = 'Download';
$txt['customMusicDownloadAlert'] = 'Only 3 files can be downloaded at once';
$txt['premiumbeat_license'] = 'License';
$txt['premiumbeat_confirm'] = 'Do you confirm this action?';

/* upload text */
$txt['customMusic_ulall'] = 'Upload all';
$txt['customMusic_ul'] = 'Uploading...';
$txt['customMusic_clear'] = 'Clear';
$txt['customMusic_file'] = 'File';
$txt['customMusic_size'] = 'Size';
$txt['customMusic_progress'] = 'Progress';
$txt['customMusic_remove'] = 'Remove';
$txt['customMusic_upload'] = 'Upload';
$txt['customMusic_finish'] = 'Finish';
]]></add>
		</operation>
	</file>
<file error="skip" name="$languagedir/ManagePermissions.english-utf8.php">		
		<!-- Add the English permissions text. -->
		<operation><search position="after"><![CDATA[$txt['permissiongroup_calendar'] = 'Calendar';]]></search><add><![CDATA[
/* Premiumbeat permission language variables */ 
$txt['permissiongroup_simple_premiumbeat_perms'] = 'Premiumbeat';
$txt['permissiongroup_premiumbeat_perms'] = 'Premiumbeat';
$txt['permissionname_premiumbeat_config'] = 'Access Premiumbeat Configuration';
$txt['permissionname_premiumbeat_settings'] = 'Access Premiumbeat Forum Settings';
$txt['permissionname_premiumbeat_showlink'] = 'Enable/View Premiumbeat Forum Link';
$txt['permissionname_premiumbeat_showbbc'] = 'Enable/View Premiumbeat BB Code Link';
$txt['permissionname_premiumbeat_showplaylists'] = 'Enable/View All Playlists For the Premiumbeat BB Code';
$txt['permissionname_premiumbeat_showupload'] = 'Enable/View Premiumbeat Upload Function';
$txt['permissionname_premiumbeat_showdownload'] = 'Enable/View Premiumbeat Download Function';
$txt['permissionname_premiumbeat_showdelete'] = 'Allow mp3 and file deletion';
$txt['permissionhelp_premiumbeat_config'] = 'This will allow the opted usergroup to moderate Premiumbeat Configuration';
$txt['permissionhelp_premiumbeat_settings'] = 'This will allow the opted usergroup to moderate Premiumbeat Forum Settings and Playlist Settings';
$txt['permissionhelp_premiumbeat_showlink'] = 'This will allow the opted usergroup to view the premiumbeat play link';
$txt['permissionhelp_premiumbeat_showbbc'] = 'This will allow the opted usergroup to view the BB Code play link';
$txt['permissionhelp_premiumbeat_showplaylists'] = 'This will allow the opted usergroup to view all playlists using BB Code';
$txt['permissionhelp_premiumbeat_showupload'] = 'This will allow the opted usergroup to use the upload mp3 function';
$txt['permissionhelp_premiumbeat_showdownload'] = 'This will allow the opted usergroup to use the download mp3 function';
$txt['permissionhelp_premiumbeat_showdelete'] = 'This will allow the opted usergroup to use any delete option';

]]></add></operation></file>			
<file error="skip" name="$languagedir/Errors.english-utf8.php">		
		<operation><search position="after"><![CDATA[?>]]></search><add><![CDATA[
/* Premiumbeat - Custom mp3 Player for SMF error messages */
$txt['customMusic_check'] = 'You are not permitted to view the mp3 playlist.';
$txt['customMusic_error'] = 'Premiumbeat database error.';
$txt['customMusic_error2'] = 'Playlist not found/specified.';
$txt['customMusic_error_zip'] = 'Compression Malfunction';
$txt['cannot_premiumbeat_settings'] = 'You do not have permission to use this option.';
$txt['cannot_premiumbeat_config'] = 'You do not have permission to use this option.';
$txt['cannot_premiumbeat_showdelete'] = 'You do not have permission to use this option.';
$txt['cannot_premiumbeat_showupload'] = 'You do not have permission to use this option.';
$txt['cannot_premiumbeat_showdownload'] = 'You do not have permission to use this option.';
$txt['cannot_premiumbeat_showbbc'] = 'You do not have permission to use this option.';
$txt['cannot_premiumbeat_showlink'] = 'You do not have permission to use this option.';
]]></add></operation></file>	
<file name="$themedir/index.template.php">		
		<!-- Add the popup forum link. -->
		<operation><search position="before"><![CDATA[if (in_array($context['current_action'], array('search']]></search>
		<add><![CDATA[, 'premiumbeat1']]></add></operation>
		<operation><search position="after"><![CDATA[	// If the user is a guest, show [login] button.]]></search>
		<add><![CDATA[	/* Play premiumbeat playlist with permission... */
	global $modSettings;	
	if (allowedTo('premiumbeat_showlink') && (!empty($modSettings['premiumbeat_link']) ? (int) $modSettings['premiumbeat_link'] : 0) == 1)	 
		echo ($current_action == 'premiumbeat1' || $context['browser']['is_ie4']) ? '<td class="maintab_active_' . $first . '">&nbsp;</td>' : '' , '
				<td valign="top" class="maintab_' , $current_action == 'premiumbeat1' ? 'active_back' : 'back' , '">
					<a href="javascript:window.open(\''.$scripturl.'?action=customMusicPopup;playlist=999\',\'Premiumbeat\',\'width=202,height=216,resizable=1\');void(0);">' ,
					 $txt['premiumbeat_player'] , '</a>
				</td>' , $current_action == 'premiumbeat1' ? '<td class="maintab_active_' . $last . '">&nbsp;</td>' : '';
	if (allowedTo('premiumbeat_config') || allowedTo('premiumbeat_settings') || allowedTo('premiumbeat_showupload') || allowedTo('premiumbeat_showdownload'))
		echo ($current_action == 'premiumbeat2' || $context['browser']['is_ie4']) ? '<td class="maintab_active_' . $first . '">&nbsp;</td>' : '' , '
				<td valign="top" class="maintab_' , $current_action == 'premiumbeat1' ? 'active_back' : 'back' , '">
					<a href="'.$scripturl.'?action=custom_mp3">',
					 $txt['customMusic_tabtitle'] , '</a>
				</td>' , $current_action == 'premiumbeat2' ? '<td class="maintab_active_' . $last . '">&nbsp;</td>' : '';
	
]]></add></operation>		
		</file>
	<file name="$sourcedir/Subs.php">		
		<operation><search position="after"><![CDATA[		// This is mainly for the bbc manager, so it's easy to add tags above.  Custom BBC should be added above this line.]]></search>
		<add><![CDATA[
		/* Premiumbeat bbc execution code */
		global $boardurl;
		if (allowedTo('premiumbeat_showbbc'))
			{				
				$_SESSION['customMusic_checker'] = true;
				$codes[] =	array(
					'tag' => 'premiumbeat',
					'type' => 'unparsed_equals',
					'before' => '<div style="text-align:left;"><div style="float:left;text-align:center;"><a href="javascript:window.open(\''.$boardurl.'/index.php?action=customMusicPopup;playlist=989;playsong=$1;\',\'Premiumbeat\',\'width=214,height=230,resizable=1\');void(0);">
					<img src="'.$boardurl.'/my_music/premiumbeat_play_Mp3.png" width="75" height="75" /><br />',
					'after' => '</a></div><div style="clear:both;">&nbsp;</div></div>',				
					'validate' => create_function('&$tag, &$data, $disabled', '
					$data = strtr($data, array(\'<br />\' => \'\'));
					if (strpos($data, \'http://\') !== 0 && strpos($data, \'https://\') !== 0)
						$data = \'http://\' . $data;'),
					'block_level' => true,	
					'disallow_children' => array('email', 'ftp', 'url', 'iurl'),
					'disabled_before' => '',
					'disabled_after' => '',	
					'trim' => 'inside',									
					);
				$codes[] = array(
					'tag' => 'premiumbeat',
					'type' => 'unparsed_content',
					'content' => '<div style="text-align:left;">
					<a href="javascript:window.open(\''.$boardurl.'/index.php?action=customMusicPopup;playlist=989;playsong=$1\',\'Premiumbeat\',\'width=210,height=230,resizable=1\');void(0);"><img src="'.$boardurl.'/my_music/premiumbeat_play_Mp3.png" width="75" height="75" /></a></div>',				
					'validate' => create_function('&$tag, &$data, $disabled', '
					$data = strtr($data, array(\'<br />\' => \'\'));
					if (strpos($data, \'http://\') !== 0 && strpos($data, \'https://\') !== 0)
						$data = \'http://\' . $data;'),
					'block_level' => true,
					'disabled_before' => '',
					'disabled_after' => '',							
					);					
			}
		else
			{			
				$codes[] = array(
					'tag' => 'premiumbeat',
					'type' => 'unparsed_content',
					'content' => '<div style="text-align:left;"><img src="'.$boardurl.'/my_music/premiumbeat_play_Mp3.png" width="75" height="75" /></div>',				
					'validate' => create_function('&$tag, &$data, $disabled', '
					$data = strtr($data, array(\'<br />\' => \'\'));
					if (strpos($data, \'http://\') !== 0 && strpos($data, \'https://\') !== 0)
					$data = \'http://\' . $data;'),
					'block_level' => true,
					'disabled_before' => '',
					'disabled_after' => '',							
					);	
				$codes[] =	array(
					'tag' => 'premiumbeat',
					'type' => 'unparsed_equals',
					'before' => '<div style="text-align:left;"><div style="float:left;text-align:center;">
								<img src="'.$boardurl.'/my_music/premiumbeat_play_Mp3.png" width="75" height="75" /><br />',
					'after' => '</div><div style="clear:both;">&nbsp;</div></div>',				
					'validate' => create_function('&$tag, &$data, $disabled', '
					$data = strtr($data, array(\'<br />\' => \'\'));
					if (strpos($data, \'http://\') !== 0 && strpos($data, \'https://\') !== 0)
						$data = \'http://\' . $data;'),
					'block_level' => true,	
					'disallow_children' => array('email', 'ftp', 'url', 'iurl'),
					'disabled_after' => ' ($1)',									
					);							
			}		
]]></add></operation>
	</file>
	<file name="$themedir/Post.template.php">
		<operation><search position="after"><![CDATA[		$found_button = false;
		// Here loop through the array, printing the images/rows/separators!]]></search>
		<add><![CDATA[
	if (allowedTo('premiumbeat_showbbc'))
		{
			$context['bbc_tags'][1][] = array();
			$context['bbc_tags'][1]['premiumbeat_bbc'] = array(					
					'code' => 'premiumbeat',
					'before' => '[premiumbeat]',
					'after' => '[/premiumbeat]',
					'description' => $txt['premiumbeat_bbc_mp3']													
			);					
		}			
]]></add></operation>		
		</file>	
</modification>
